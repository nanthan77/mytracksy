<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>MyTracksy - Company Profile Setup</title>
    <meta name="description" content="Set up your company profile with industry-specific theming and advanced business intelligence">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="sri-lanka-tax-engine.js"></script>
    <style>
        :root {
            /* Technology Theme */
            --tech-primary: #2563eb;
            --tech-secondary: #1e40af;
            --tech-accent: #3b82f6;
            --tech-bg: linear-gradient(135deg, #1e3a8a 0%, #3730a3 100%);
            
            /* Healthcare Theme */
            --health-primary: #059669;
            --health-secondary: #047857;
            --health-accent: #10b981;
            --health-bg: linear-gradient(135deg, #064e3b 0%, #065f46 100%);
            
            /* Legal Theme */
            --legal-primary: #1e3a8a;
            --legal-secondary: #1e40af;
            --legal-accent: #fbbf24;
            --legal-bg: linear-gradient(135deg, #1e2124 0%, #374151 100%);
            
            /* Manufacturing Theme */
            --mfg-primary: #ea580c;
            --mfg-secondary: #c2410c;
            --mfg-accent: #fb923c;
            --mfg-bg: linear-gradient(135deg, #7c2d12 0%, #9a3412 100%);
            
            /* Restaurant Theme */
            --food-primary: #dc2626;
            --food-secondary: #b91c1c;
            --food-accent: #ef4444;
            --food-bg: linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%);
            
            /* Retail Theme */
            --retail-primary: #7c3aed;
            --retail-secondary: #6d28d9;
            --retail-accent: #8b5cf6;
            --retail-bg: linear-gradient(135deg, #581c87 0%, #6b21a8 100%);
            
            /* Service Industry Theme */
            --service-primary: #0891b2;
            --service-secondary: #0e7490;
            --service-accent: #06b6d4;
            --service-bg: linear-gradient(135deg, #164e63 0%, #0f766e 100%);
            
            /* Finance Theme */
            --finance-primary: #059669;
            --finance-secondary: #047857;
            --finance-accent: #10b981;
            --finance-bg: linear-gradient(135deg, #064e3b 0%, #065f46 100%);
            
            /* Education Theme */
            --education-primary: #7c2d12;
            --education-secondary: #9a3412;
            --education-accent: #ea580c;
            --education-bg: linear-gradient(135deg, #451a03 0%, #7c2d12 100%);
            
            /* Default Colors */
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #f093fb;
            --success-color: #00c851;
            --warning-color: #ffbb33;
            --error-color: #ff4444;
            --dark-color: #2c3e50;
            --light-color: #ffffff;
            --gray-100: #f8f9fa;
            --gray-200: #e9ecef;
            --gray-300: #dee2e6;
            --gray-400: #ced4da;
            --gray-500: #adb5bd;
            --gray-600: #6c757d;
            --gray-700: #495057;
            --gray-800: #343a40;
            --gray-900: #212529;
            --shadow-sm: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            --shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 1rem 3rem rgba(0, 0, 0, 0.175);
            --border-radius: 8px;
            --border-radius-lg: 16px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 50%, var(--accent-color) 100%);
            min-height: 100vh;
            color: var(--dark-color);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Theme Classes */
        .theme-technology {
            --primary-color: var(--tech-primary);
            --secondary-color: var(--tech-secondary);
            --accent-color: var(--tech-accent);
            background: var(--tech-bg);
        }

        .theme-healthcare {
            --primary-color: var(--health-primary);
            --secondary-color: var(--health-secondary);
            --accent-color: var(--health-accent);
            background: var(--health-bg);
        }

        .theme-legal {
            --primary-color: var(--legal-primary);
            --secondary-color: var(--legal-secondary);
            --accent-color: var(--legal-accent);
            background: var(--legal-bg);
        }

        .theme-manufacturing {
            --primary-color: var(--mfg-primary);
            --secondary-color: var(--mfg-secondary);
            --accent-color: var(--mfg-accent);
            background: var(--mfg-bg);
        }

        .theme-food {
            --primary-color: var(--food-primary);
            --secondary-color: var(--food-secondary);
            --accent-color: var(--food-accent);
            background: var(--food-bg);
        }

        .theme-retail {
            --primary-color: var(--retail-primary);
            --secondary-color: var(--retail-secondary);
            --accent-color: var(--retail-accent);
            background: var(--retail-bg);
        }

        .theme-service {
            --primary-color: var(--service-primary);
            --secondary-color: var(--service-secondary);
            --accent-color: var(--service-accent);
            background: var(--service-bg);
        }

        .theme-finance {
            --primary-color: var(--finance-primary);
            --secondary-color: var(--finance-secondary);
            --accent-color: var(--finance-accent);
            background: var(--finance-bg);
        }

        .theme-education {
            --primary-color: var(--education-primary);
            --secondary-color: var(--education-secondary);
            --accent-color: var(--education-accent);
            background: var(--education-bg);
        }

        .setup-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .setup-header {
            text-align: center;
            margin-bottom: 3rem;
            color: white;
        }

        .setup-title {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #ffffff, #f0f8ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .setup-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .setup-progress {
            display: flex;
            justify-content: center;
            margin-bottom: 3rem;
        }

        .progress-bar {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .progress-step {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            color: white;
            font-weight: 600;
            transition: var(--transition);
        }

        .progress-step.active {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .progress-step.completed {
            background: var(--success-color);
        }

        .setup-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius-lg);
            padding: 3rem;
            box-shadow: var(--shadow-lg);
            border: 1px solid rgba(255, 255, 255, 0.2);
            flex: 1;
        }

        .step-section {
            display: none;
        }

        .step-section.active {
            display: block;
            animation: fadeInUp 0.5s ease-out;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .section-subtitle {
            color: var(--gray-600);
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--gray-700);
        }

        .form-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--gray-200);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }

        .form-select {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--gray-200);
            border-radius: var(--border-radius);
            font-size: 1rem;
            background: white;
            cursor: pointer;
            transition: var(--transition);
        }

        .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--gray-200);
            border-radius: var(--border-radius);
            font-size: 1rem;
            min-height: 120px;
            resize: vertical;
            transition: var(--transition);
            font-family: inherit;
        }

        .form-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .category-card {
            background: white;
            border: 2px solid var(--gray-200);
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-color);
            opacity: 0;
            transition: var(--transition);
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
            border-color: var(--primary-color);
        }

        .category-card:hover::before {
            opacity: 1;
        }

        .category-card.selected {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .category-card.selected::before {
            opacity: 1;
            height: 100%;
        }

        .category-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
            transition: var(--transition);
        }

        .category-card.selected .category-icon {
            color: white;
        }

        .category-name {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .category-desc {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .logo-upload {
            border: 2px dashed var(--gray-300);
            border-radius: var(--border-radius-lg);
            padding: 3rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            background: var(--gray-100);
        }

        .logo-upload:hover {
            border-color: var(--primary-color);
            background: rgba(102, 126, 234, 0.05);
        }

        .logo-upload.dragover {
            border-color: var(--primary-color);
            background: rgba(102, 126, 234, 0.1);
            transform: scale(1.02);
        }

        .logo-preview {
            max-width: 200px;
            max-height: 200px;
            margin: 1rem auto;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .social-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .social-input-group {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--gray-100);
            border-radius: var(--border-radius);
        }

        .social-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .social-icon.linkedin { background: #0077b5; }
        .social-icon.facebook { background: #3b5998; }
        .social-icon.instagram { background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); }
        .social-icon.twitter { background: #1da1f2; }
        .social-icon.website { background: var(--primary-color); }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-secondary {
            background: var(--gray-200);
            color: var(--gray-700);
        }

        .btn-secondary:hover {
            background: var(--gray-300);
            transform: translateY(-2px);
        }

        .setup-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--gray-200);
        }

        .preview-card {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow);
            margin: 2rem 0;
        }

        .company-header {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--gray-200);
        }

        .company-logo-display {
            width: 80px;
            height: 80px;
            background: var(--gray-100);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: var(--gray-500);
        }

        .company-info h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 0.5rem;
        }

        .company-info p {
            color: var(--gray-600);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .info-item {
            text-align: center;
            padding: 1rem;
            background: var(--gray-100);
            border-radius: var(--border-radius);
        }

        .info-item strong {
            display: block;
            color: var(--primary-color);
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .setup-container {
                padding: 1rem;
            }

            .setup-content {
                padding: 2rem;
            }

            .setup-title {
                font-size: 2rem;
            }

            .form-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .category-grid {
                grid-template-columns: 1fr;
            }

            .social-grid {
                grid-template-columns: 1fr;
            }

            .setup-actions {
                flex-direction: column;
                gap: 1rem;
            }

            .company-header {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="setup-container">
        <div class="setup-header">
            <h1 class="setup-title">🏢 Company Profile Setup</h1>
            <p class="setup-subtitle">Create your professional business profile with industry-specific theming</p>
        </div>

        <div class="setup-progress">
            <div class="progress-bar">
                <div class="progress-step active" id="step1-indicator">
                    <i class="fas fa-building"></i>
                    <span>Basic Info</span>
                </div>
                <div class="progress-step" id="step2-indicator">
                    <i class="fas fa-palette"></i>
                    <span>Category & Theme</span>
                </div>
                <div class="progress-step" id="step3-indicator">
                    <i class="fas fa-image"></i>
                    <span>Branding</span>
                </div>
                <div class="progress-step" id="step4-indicator">
                    <i class="fas fa-share-alt"></i>
                    <span>Social Media</span>
                </div>
                <div class="progress-step" id="step5-indicator">
                    <i class="fas fa-eye"></i>
                    <span>Preview</span>
                </div>
            </div>
        </div>

        <div class="setup-content">
            <!-- Step 1: Basic Company Information -->
            <div class="step-section active" id="step1">
                <h2 class="section-title">
                    <i class="fas fa-building"></i>
                    Basic Company Information
                </h2>
                <p class="section-subtitle">Tell us about your company to create a personalized profile</p>

                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Company Name *</label>
                        <input type="text" class="form-input" id="companyName" placeholder="Enter your company name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Company Tagline</label>
                        <input type="text" class="form-input" id="companyTagline" placeholder="Brief company motto or tagline">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Founded Year</label>
                        <input type="number" class="form-input" id="foundedYear" placeholder="2020" min="1800" max="2025">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Employee Count</label>
                        <select class="form-select" id="employeeCount">
                            <option value="">Select employee count</option>
                            <option value="1-10">1-10 employees</option>
                            <option value="11-50">11-50 employees</option>
                            <option value="51-200">51-200 employees</option>
                            <option value="201-500">201-500 employees</option>
                            <option value="501-1000">501-1000 employees</option>
                            <option value="1000+">1000+ employees</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Annual Revenue</label>
                        <select class="form-select" id="annualRevenue">
                            <option value="">Select revenue range</option>
                            <option value="Under LKR 10M">Under LKR 10 Million</option>
                            <option value="LKR 10M-50M">LKR 10-50 Million</option>
                            <option value="LKR 50M-100M">LKR 50-100 Million</option>
                            <option value="LKR 100M-500M">LKR 100-500 Million</option>
                            <option value="LKR 500M-1B">LKR 500M-1 Billion</option>
                            <option value="Over LKR 1B">Over LKR 1 Billion</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Company Location</label>
                        <input type="text" class="form-input" id="companyLocation" placeholder="Colombo, Sri Lanka">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Company Description</label>
                    <textarea class="form-textarea" id="companyDescription" placeholder="Describe your company, its mission, and what makes it unique..."></textarea>
                </div>
            </div>

            <!-- Step 2: Business Category & Theme -->
            <div class="step-section" id="step2">
                <h2 class="section-title">
                    <i class="fas fa-palette"></i>
                    Business Category & Theme
                </h2>
                <p class="section-subtitle">Choose your industry to unlock specialized features and visual themes</p>

                <div class="category-grid">
                    <div class="category-card" onclick="selectCategory('technology')">
                        <div class="category-icon">
                            <i class="fas fa-microchip"></i>
                        </div>
                        <div class="category-name">Technology</div>
                        <div class="category-desc">Software, IT services, startups</div>
                    </div>
                    <div class="category-card" onclick="selectCategory('healthcare')">
                        <div class="category-icon">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <div class="category-name">Healthcare</div>
                        <div class="category-desc">Medical, pharmaceutical, wellness</div>
                    </div>
                    <div class="category-card" onclick="selectCategory('legal')">
                        <div class="category-icon">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <div class="category-name">Legal</div>
                        <div class="category-desc">Law firms, legal services</div>
                    </div>
                    <div class="category-card" onclick="selectCategory('manufacturing')">
                        <div class="category-icon">
                            <i class="fas fa-cogs"></i>
                        </div>
                        <div class="category-name">Manufacturing</div>
                        <div class="category-desc">Production, industrial, engineering</div>
                    </div>
                    <div class="category-card" onclick="selectCategory('food')">
                        <div class="category-icon">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <div class="category-name">Food & Restaurant</div>
                        <div class="category-desc">Restaurants, catering, food services</div>
                    </div>
                    <div class="category-card" onclick="selectCategory('retail')">
                        <div class="category-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="category-name">Retail & E-commerce</div>
                        <div class="category-desc">Shops, online stores, commerce</div>
                    </div>
                    <div class="category-card" onclick="selectCategory('service')">
                        <div class="category-icon">
                            <i class="fas fa-plane"></i>
                        </div>
                        <div class="category-name">Service Industry</div>
                        <div class="category-desc">Travel agencies, tour operators, consulting</div>
                    </div>
                    <div class="category-card" onclick="selectCategory('finance')">
                        <div class="category-icon">
                            <i class="fas fa-university"></i>
                        </div>
                        <div class="category-name">Finance & Banking</div>
                        <div class="category-desc">Banks, insurance, financial services</div>
                    </div>
                    <div class="category-card" onclick="selectCategory('education')">
                        <div class="category-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="category-name">Education</div>
                        <div class="category-desc">Schools, universities, training centers</div>
                    </div>
                </div>
            </div>

            <!-- Step 3: Logo & Branding -->
            <div class="step-section" id="step3">
                <h2 class="section-title">
                    <i class="fas fa-image"></i>
                    Logo & Branding
                </h2>
                <p class="section-subtitle">Upload your company logo to personalize your profile</p>

                <div class="logo-upload" id="logoUpload">
                    <div id="logoUploadContent">
                        <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; color: var(--gray-400); margin-bottom: 1rem;"></i>
                        <h3>Upload Company Logo</h3>
                        <p>Drag and drop your logo here, or click to browse</p>
                        <p style="font-size: 0.9rem; color: var(--gray-500); margin-top: 1rem;">
                            Supports JPG, PNG, SVG (Max 5MB)
                        </p>
                    </div>
                    <img id="logoPreview" class="logo-preview hidden" />
                    <input type="file" id="logoFile" accept="image/*" style="display: none;">
                </div>

                <div class="form-grid" style="margin-top: 2rem;">
                    <div class="form-group">
                        <label class="form-label">Primary Brand Color</label>
                        <input type="color" class="form-input" id="primaryColor" value="#667eea">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Secondary Brand Color</label>
                        <input type="color" class="form-input" id="secondaryColor" value="#764ba2">
                    </div>
                </div>
            </div>

            <!-- Step 4: Social Media Integration -->
            <div class="step-section" id="step4">
                <h2 class="section-title">
                    <i class="fas fa-share-alt"></i>
                    Social Media Integration
                </h2>
                <p class="section-subtitle">Connect your social media profiles to build credibility</p>

                <div class="social-grid">
                    <div class="social-input-group">
                        <div class="social-icon linkedin">
                            <i class="fab fa-linkedin-in"></i>
                        </div>
                        <input type="url" class="form-input" id="linkedinUrl" placeholder="LinkedIn company page URL" style="border: none; background: transparent;">
                    </div>
                    <div class="social-input-group">
                        <div class="social-icon facebook">
                            <i class="fab fa-facebook-f"></i>
                        </div>
                        <input type="url" class="form-input" id="facebookUrl" placeholder="Facebook page URL" style="border: none; background: transparent;">
                    </div>
                    <div class="social-input-group">
                        <div class="social-icon instagram">
                            <i class="fab fa-instagram"></i>
                        </div>
                        <input type="url" class="form-input" id="instagramUrl" placeholder="Instagram profile URL" style="border: none; background: transparent;">
                    </div>
                    <div class="social-input-group">
                        <div class="social-icon twitter">
                            <i class="fab fa-twitter"></i>
                        </div>
                        <input type="url" class="form-input" id="twitterUrl" placeholder="Twitter profile URL" style="border: none; background: transparent;">
                    </div>
                    <div class="social-input-group">
                        <div class="social-icon website">
                            <i class="fas fa-globe"></i>
                        </div>
                        <input type="url" class="form-input" id="websiteUrl" placeholder="Company website URL" style="border: none; background: transparent;">
                    </div>
                </div>
            </div>

            <!-- Step 5: Preview -->
            <div class="step-section" id="step5">
                <h2 class="section-title">
                    <i class="fas fa-eye"></i>
                    Company Profile Preview
                </h2>
                <p class="section-subtitle">Review your company profile before finalizing</p>

                <div class="preview-card">
                    <div class="company-header">
                        <div class="company-logo-display" id="previewLogo">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="company-info">
                            <h2 id="previewName">Company Name</h2>
                            <p id="previewTagline">Company tagline will appear here</p>
                            <p id="previewLocation">Location</p>
                        </div>
                    </div>

                    <div id="previewDescription">
                        Company description will appear here...
                    </div>

                    <div class="info-grid">
                        <div class="info-item">
                            <strong>Founded</strong>
                            <span id="previewFounded">-</span>
                        </div>
                        <div class="info-item">
                            <strong>Employees</strong>
                            <span id="previewEmployees">-</span>
                        </div>
                        <div class="info-item">
                            <strong>Revenue</strong>
                            <span id="previewRevenue">-</span>
                        </div>
                        <div class="info-item">
                            <strong>Industry</strong>
                            <span id="previewCategory">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="setup-actions">
                <button class="btn btn-secondary" id="prevBtn" onclick="previousStep()">
                    <i class="fas fa-arrow-left"></i>
                    Previous
                </button>
                <div>
                    <span id="stepIndicator">Step 1 of 5</span>
                </div>
                <button class="btn btn-primary" id="nextBtn" onclick="nextStep()">
                    Next
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let selectedCategory = '';
        let companyData = {};

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is authenticated
            const userData = localStorage.getItem('myTracksyUser');
            if (!userData) {
                window.location.href = 'login.html';
                return;
            }

            // Setup event listeners
            setupEventListeners();
            updateStepIndicator();
        });

        function setupEventListeners() {
            // Logo upload
            const logoUpload = document.getElementById('logoUpload');
            const logoFile = document.getElementById('logoFile');

            logoUpload.addEventListener('click', () => logoFile.click());
            logoUpload.addEventListener('dragover', handleDragOver);
            logoUpload.addEventListener('drop', handleDrop);
            logoFile.addEventListener('change', handleFileSelect);

            // Form inputs for live preview
            document.getElementById('companyName').addEventListener('input', updatePreview);
            document.getElementById('companyTagline').addEventListener('input', updatePreview);
            document.getElementById('companyLocation').addEventListener('input', updatePreview);
            document.getElementById('companyDescription').addEventListener('input', updatePreview);
            document.getElementById('foundedYear').addEventListener('input', updatePreview);
            document.getElementById('employeeCount').addEventListener('change', updatePreview);
            document.getElementById('annualRevenue').addEventListener('change', updatePreview);
        }

        function selectCategory(category) {
            selectedCategory = category;
            
            // Update visual selection
            document.querySelectorAll('.category-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');

            // Apply theme
            applyTheme(category);
            updatePreview();
        }

        function applyTheme(category) {
            const body = document.body;
            
            // Remove existing theme classes
            body.classList.remove('theme-technology', 'theme-healthcare', 'theme-legal', 'theme-manufacturing', 'theme-food', 'theme-retail', 'theme-service', 'theme-finance', 'theme-education');
            
            // Add new theme class
            body.classList.add(`theme-${category}`);
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleLogoFile(files[0]);
            }
        }

        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                handleLogoFile(file);
            }
        }

        function handleLogoFile(file) {
            if (file.size > 5 * 1024 * 1024) {
                alert('File size must be less than 5MB');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                const logoPreview = document.getElementById('logoPreview');
                const logoUploadContent = document.getElementById('logoUploadContent');
                
                logoPreview.src = e.target.result;
                logoPreview.classList.remove('hidden');
                logoUploadContent.style.display = 'none';

                // Update preview
                updatePreview();
            };
            reader.readAsDataURL(file);
        }

        function updatePreview() {
            const name = document.getElementById('companyName').value || 'Company Name';
            const tagline = document.getElementById('companyTagline').value || 'Company tagline will appear here';
            const location = document.getElementById('companyLocation').value || 'Location';
            const description = document.getElementById('companyDescription').value || 'Company description will appear here...';
            const founded = document.getElementById('foundedYear').value || '-';
            const employees = document.getElementById('employeeCount').value || '-';
            const revenue = document.getElementById('annualRevenue').value || '-';

            document.getElementById('previewName').textContent = name;
            document.getElementById('previewTagline').textContent = tagline;
            document.getElementById('previewLocation').textContent = location;
            document.getElementById('previewDescription').textContent = description;
            document.getElementById('previewFounded').textContent = founded;
            document.getElementById('previewEmployees').textContent = employees;
            document.getElementById('previewRevenue').textContent = revenue;
            document.getElementById('previewCategory').textContent = selectedCategory ? selectedCategory.charAt(0).toUpperCase() + selectedCategory.slice(1) : '-';

            // Update logo in preview
            const logoPreview = document.getElementById('logoPreview');
            const previewLogo = document.getElementById('previewLogo');
            
            if (!logoPreview.classList.contains('hidden')) {
                previewLogo.innerHTML = `<img src="${logoPreview.src}" style="width: 100%; height: 100%; object-fit: contain; border-radius: var(--border-radius);">`;
            }
        }

        function nextStep() {
            if (validateCurrentStep()) {
                if (currentStep < 5) {
                    currentStep++;
                    showStep(currentStep);
                } else {
                    completeSetup();
                }
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function showStep(step) {
            // Hide all steps
            document.querySelectorAll('.step-section').forEach(section => {
                section.classList.remove('active');
            });

            // Show current step
            document.getElementById(`step${step}`).classList.add('active');

            // Update progress indicators
            updateStepIndicator();
            updateProgressBar();
        }

        function updateStepIndicator() {
            document.getElementById('stepIndicator').textContent = `Step ${currentStep} of 5`;
            
            // Update button text
            const nextBtn = document.getElementById('nextBtn');
            if (currentStep === 5) {
                nextBtn.innerHTML = '<i class="fas fa-check"></i> Complete Setup';
            } else {
                nextBtn.innerHTML = 'Next <i class="fas fa-arrow-right"></i>';
            }

            // Show/hide previous button
            document.getElementById('prevBtn').style.display = currentStep === 1 ? 'none' : 'flex';
        }

        function updateProgressBar() {
            for (let i = 1; i <= 5; i++) {
                const indicator = document.getElementById(`step${i}-indicator`);
                indicator.classList.remove('active', 'completed');
                
                if (i < currentStep) {
                    indicator.classList.add('completed');
                } else if (i === currentStep) {
                    indicator.classList.add('active');
                }
            }
        }

        function validateCurrentStep() {
            switch (currentStep) {
                case 1:
                    const companyName = document.getElementById('companyName').value;
                    if (!companyName.trim()) {
                        alert('Please enter a company name');
                        return false;
                    }
                    break;
                case 2:
                    if (!selectedCategory) {
                        alert('Please select a business category');
                        return false;
                    }
                    break;
            }
            return true;
        }

        function completeSetup() {
            // Collect all form data
            companyData = {
                name: document.getElementById('companyName').value,
                tagline: document.getElementById('companyTagline').value,
                founded: document.getElementById('foundedYear').value,
                employees: document.getElementById('employeeCount').value,
                revenue: document.getElementById('annualRevenue').value,
                location: document.getElementById('companyLocation').value,
                description: document.getElementById('companyDescription').value,
                category: selectedCategory,
                logo: document.getElementById('logoPreview').src,
                primaryColor: document.getElementById('primaryColor').value,
                secondaryColor: document.getElementById('secondaryColor').value,
                socialMedia: {
                    linkedin: document.getElementById('linkedinUrl').value,
                    facebook: document.getElementById('facebookUrl').value,
                    instagram: document.getElementById('instagramUrl').value,
                    twitter: document.getElementById('twitterUrl').value,
                    website: document.getElementById('websiteUrl').value
                },
                setupCompleted: true,
                setupDate: new Date().toISOString()
            };

            // Add unique ID to company
            companyData.id = Date.now().toString();

            // Save to user's companies list
            const userCompanies = JSON.parse(localStorage.getItem('myTracksyUserCompanies') || '[]');
            userCompanies.push(companyData);
            localStorage.setItem('myTracksyUserCompanies', JSON.stringify(userCompanies));

            // Also save as current company for compatibility
            localStorage.setItem('myTracksyCompany', JSON.stringify(companyData));

            // Show success message
            alert('🎉 Company profile setup completed successfully!');

            // Redirect to user profile
            window.location.href = 'user-profile.html';
        }
    </script>
</body>
</html>