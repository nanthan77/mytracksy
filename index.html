<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>MyTracksy - Production Ready Financial Intelligence Platform</title>
    <meta name="description" content="Advanced Sri Lankan financial management platform with AI, multi-language support, and enterprise features">
    <meta name="keywords" content="MyTracksy, Sri Lanka, finance, expense tracking, budget, investment, AI, financial intelligence">
    <meta property="og:title" content="MyTracksy - Financial Intelligence Platform">
    <meta property="og:description" content="Next-generation financial management for Sri Lankan professionals">
    <meta property="og:url" content="https://www.mytracksy.com">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="canonical" href="https://www.mytracksy.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="sri-lanka-tax-engine.js"></script>
    <script src="behavioral-engagement-system.js"></script>
    <style>
        :root {
            /* Technology Theme */
            --tech-primary: #2563eb;
            --tech-secondary: #1e40af;
            --tech-accent: #3b82f6;
            --tech-bg: linear-gradient(135deg, #1e3a8a 0%, #3730a3 100%);
            
            /* Healthcare Theme */
            --health-primary: #059669;
            --health-secondary: #047857;
            --health-accent: #10b981;
            --health-bg: linear-gradient(135deg, #064e3b 0%, #065f46 100%);
            
            /* Legal Theme */
            --legal-primary: #1e3a8a;
            --legal-secondary: #1e40af;
            --legal-accent: #fbbf24;
            --legal-bg: linear-gradient(135deg, #1e2124 0%, #374151 100%);
            
            /* Manufacturing Theme */
            --mfg-primary: #ea580c;
            --mfg-secondary: #c2410c;
            --mfg-accent: #fb923c;
            --mfg-bg: linear-gradient(135deg, #7c2d12 0%, #9a3412 100%);
            
            /* Restaurant Theme */
            --food-primary: #dc2626;
            --food-secondary: #b91c1c;
            --food-accent: #ef4444;
            --food-bg: linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%);
            
            /* Retail Theme */
            --retail-primary: #7c3aed;
            --retail-secondary: #6d28d9;
            --retail-accent: #8b5cf6;
            --retail-bg: linear-gradient(135deg, #581c87 0%, #6b21a8 100%);
            
            /* Service Industry Theme */
            --service-primary: #0891b2;
            --service-secondary: #0e7490;
            --service-accent: #06b6d4;
            --service-bg: linear-gradient(135deg, #164e63 0%, #0f766e 100%);
            
            /* Finance Theme */
            --finance-primary: #059669;
            --finance-secondary: #047857;
            --finance-accent: #10b981;
            --finance-bg: linear-gradient(135deg, #064e3b 0%, #065f46 100%);
            
            /* Education Theme */
            --education-primary: #7c2d12;
            --education-secondary: #9a3412;
            --education-accent: #ea580c;
            --education-bg: linear-gradient(135deg, #451a03 0%, #7c2d12 100%);
            
            /* Default Colors */
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #f093fb;
            --success-color: #00c851;
            --warning-color: #ffbb33;
            --error-color: #ff4444;
            --dark-color: #2c3e50;
            --light-color: #ffffff;
            --gray-100: #f8f9fa;
            --gray-200: #e9ecef;
            --gray-300: #dee2e6;
            --gray-400: #ced4da;
            --gray-500: #adb5bd;
            --gray-600: #6c757d;
            --gray-700: #495057;
            --gray-800: #343a40;
            --gray-900: #212529;
            --shadow-sm: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            --shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 1rem 3rem rgba(0, 0, 0, 0.175);
            --border-radius: 8px;
            --border-radius-lg: 16px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Theme Classes */
        .theme-technology {
            --primary-color: var(--tech-primary);
            --secondary-color: var(--tech-secondary);
            --accent-color: var(--tech-accent);
            background: var(--tech-bg);
        }

        .theme-healthcare {
            --primary-color: var(--health-primary);
            --secondary-color: var(--health-secondary);
            --accent-color: var(--health-accent);
            background: var(--health-bg);
        }

        .theme-legal {
            --primary-color: var(--legal-primary);
            --secondary-color: var(--legal-secondary);
            --accent-color: var(--legal-accent);
            background: var(--legal-bg);
        }

        .theme-manufacturing {
            --primary-color: var(--mfg-primary);
            --secondary-color: var(--mfg-secondary);
            --accent-color: var(--mfg-accent);
            background: var(--mfg-bg);
        }

        .theme-food {
            --primary-color: var(--food-primary);
            --secondary-color: var(--food-secondary);
            --accent-color: var(--food-accent);
            background: var(--food-bg);
        }

        .theme-retail {
            --primary-color: var(--retail-primary);
            --secondary-color: var(--retail-secondary);
            --accent-color: var(--retail-accent);
            background: var(--retail-bg);
        }

        .theme-service {
            --primary-color: var(--service-primary);
            --secondary-color: var(--service-secondary);
            --accent-color: var(--service-accent);
            background: var(--service-bg);
        }

        .theme-finance {
            --primary-color: var(--finance-primary);
            --secondary-color: var(--finance-secondary);
            --accent-color: var(--finance-accent);
            background: var(--finance-bg);
        }

        .theme-education {
            --primary-color: var(--education-primary);
            --secondary-color: var(--education-secondary);
            --accent-color: var(--education-accent);
            background: var(--education-bg);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 50%, var(--accent-color) 100%);
            min-height: 100vh;
            color: var(--dark-color);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 1000;
            padding: 1rem 0;
            transition: var(--transition);
        }

        .navbar.scrolled {
            background: rgba(255, 255, 255, 0.98);
            box-shadow: var(--shadow);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }

        .logo i {
            font-size: 2rem;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: var(--gray-700);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            position: relative;
        }

        .nav-link:hover {
            color: var(--primary-color);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-color);
            transition: var(--transition);
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .user-menu {
            position: relative;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .user-avatar:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow);
        }

        .main-content {
            margin-top: 80px;
            padding: 2rem;
        }

        .hero-section {
            text-align: center;
            padding: 4rem 0;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 300"><defs><pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse"><path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grid)"/></svg>');
            opacity: 0.3;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            margin: 0 auto;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            background: linear-gradient(45deg, #ffffff, #f0f8ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeInUp 1s ease-out;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            opacity: 0.9;
            animation: fadeInUp 1s ease-out 0.2s both;
        }

        .hero-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
            animation: fadeInUp 1s ease-out 0.4s both;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
        }

        .stat-number {
            font-size: 3rem;
            font-weight: 700;
            color: #FFD700;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 2rem;
            animation: fadeInUp 1s ease-out 0.6s both;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: var(--dark-color);
            box-shadow: var(--shadow);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
            height: calc(100vh - 140px);
        }

        .sidebar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.2);
            height: fit-content;
            position: sticky;
            top: 100px;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-item {
            margin-bottom: 0.5rem;
        }

        .sidebar-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: var(--gray-700);
            text-decoration: none;
            border-radius: var(--border-radius);
            transition: var(--transition);
            font-weight: 500;
        }

        .sidebar-link:hover,
        .sidebar-link.active {
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            color: white;
            transform: translateX(5px);
        }

        .sidebar-link i {
            width: 20px;
            text-align: center;
        }

        .main-dashboard {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.2);
            overflow-y: auto;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--gray-200);
        }

        .dashboard-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark-color);
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .card {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .card-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--gray-700);
        }

        .card-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }

        .card-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 0.5rem;
        }

        .card-change {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .card-change.positive {
            color: var(--success-color);
        }

        .card-change.negative {
            color: var(--error-color);
        }

        .phases-section {
            margin-top: 2rem;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .phases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .phase-card {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            transition: var(--transition);
            position: relative;
        }

        .phase-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }

        .phase-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .phase-number {
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .phase-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            color: var(--success-color);
        }

        .phase-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 0.5rem;
        }

        .phase-description {
            color: var(--gray-600);
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .phase-features {
            list-style: none;
        }

        .phase-feature {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.25rem 0;
            color: var(--gray-600);
            font-size: 0.9rem;
        }

        .phase-feature i {
            color: var(--success-color);
        }

        .floating-shapes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .shape {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 6s ease-in-out infinite;
        }

        .shape:nth-child(1) {
            width: 80px;
            height: 80px;
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .shape:nth-child(2) {
            width: 120px;
            height: 120px;
            top: 60%;
            right: 15%;
            animation-delay: 2s;
        }

        .shape:nth-child(3) {
            width: 60px;
            height: 60px;
            bottom: 20%;
            left: 20%;
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(120deg); }
            66% { transform: translateY(10px) rotate(240deg); }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--gray-700);
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .nav-menu {
                display: none;
            }

            .mobile-menu-toggle {
                display: block;
            }

            .hero-title {
                font-size: 2.5rem;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .sidebar {
                display: none;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }

            .phases-grid {
                grid-template-columns: 1fr;
            }

            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }
        }

        .hidden {
            display: none !important;
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--gray-300);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="floating-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="#" class="logo">
                <i class="fas fa-chart-line"></i>
                MyTracksy
            </a>
            <ul class="nav-menu">
                <li><a href="#dashboard" class="nav-link">Dashboard</a></li>
                <li><a href="#expenses" class="nav-link">Expenses</a></li>
                <li><a href="#analytics" class="nav-link">Analytics</a></li>
                <li><a href="phases.html" class="nav-link">Phases</a></li>
            </ul>
            <div class="user-menu">
                <div class="user-avatar" id="userAvatar">
                    <i class="fas fa-user"></i>
                </div>
                <button class="mobile-menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <!-- Hero Section -->
        <section class="hero-section" id="hero">
            <div class="hero-bg"></div>
            <div class="hero-content">
                <h1 class="hero-title">🇱🇰 MyTracksy Financial Intelligence</h1>
                <p class="hero-subtitle">Advanced financial management platform for Sri Lankan professionals with AI-powered insights, multi-language support, and enterprise-grade security.</p>
                
                <div class="hero-stats">
                    <div class="stat-card">
                        <div class="stat-number">22</div>
                        <div class="stat-label">Phases Complete</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">50+</div>
                        <div class="stat-label">Advanced Features</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">3</div>
                        <div class="stat-label">Languages</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">∞</div>
                        <div class="stat-label">Possibilities</div>
                    </div>
                </div>

                <div class="cta-buttons">
                    <a href="#dashboard" class="btn btn-primary" onclick="showDashboard()">
                        <i class="fas fa-tachometer-alt"></i>
                        Launch Dashboard
                    </a>
                    <a href="#features" class="btn btn-secondary" onclick="showFeatures()">
                        <i class="fas fa-list"></i>
                        View All Features
                    </a>
                </div>
            </div>
        </section>

        <!-- Dashboard Section -->
        <section class="dashboard-grid hidden" id="dashboardSection">
            <aside class="sidebar">
                <ul class="sidebar-menu">
                    <li class="sidebar-item">
                        <a href="user-profile.html" class="sidebar-link">
                            <i class="fas fa-user-circle"></i>
                            My Profile
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#overview" class="sidebar-link active">
                            <i class="fas fa-chart-pie"></i>
                            Overview
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#expenses" class="sidebar-link" onclick="showExpenseTracker()">
                            <i class="fas fa-credit-card"></i>
                            Expenses
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#budgets" class="sidebar-link">
                            <i class="fas fa-piggy-bank"></i>
                            Budgets
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#investments" class="sidebar-link">
                            <i class="fas fa-chart-line"></i>
                            Investments
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#analytics" class="sidebar-link">
                            <i class="fas fa-analytics"></i>
                            Analytics
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#ai-insights" class="sidebar-link">
                            <i class="fas fa-brain"></i>
                            AI Insights
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#reports" class="sidebar-link">
                            <i class="fas fa-file-alt"></i>
                            Reports
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="profession-setup.html" class="sidebar-link">
                            <i class="fas fa-user-cog"></i>
                            Professional Setup
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#settings" class="sidebar-link">
                            <i class="fas fa-cog"></i>
                            Settings
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link" onclick="logout()" style="color: var(--error-color);">
                            <i class="fas fa-sign-out-alt"></i>
                            Logout
                        </a>
                    </li>
                </ul>
            </aside>

            <main class="main-dashboard">
                <div class="dashboard-header">
                    <div>
                        <h1 class="dashboard-title">Financial Dashboard</h1>
                        <p style="color: var(--gray-600); margin-top: 0.5rem;" id="welcomeMessage">Welcome back! Here's your financial overview.</p>
                    </div>
                    <div class="cta-buttons">
                        <button class="btn btn-primary" onclick="addExpense()">
                            <i class="fas fa-plus"></i>
                            Add Expense
                        </button>
                    </div>
                </div>

                <div class="cards-grid">
                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Total Balance</div>
                                <div class="card-value">LKR 2,847,500</div>
                                <div class="card-change positive">
                                    <i class="fas fa-arrow-up"></i>
                                    +12.5% from last month
                                </div>
                            </div>
                            <div class="card-icon">
                                <i class="fas fa-wallet"></i>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Monthly Expenses</div>
                                <div class="card-value">LKR 184,750</div>
                                <div class="card-change negative">
                                    <i class="fas fa-arrow-down"></i>
                                    -5.2% from last month
                                </div>
                            </div>
                            <div class="card-icon">
                                <i class="fas fa-credit-card"></i>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Investments</div>
                                <div class="card-value">LKR 1,245,000</div>
                                <div class="card-change positive">
                                    <i class="fas fa-arrow-up"></i>
                                    +8.7% from last month
                                </div>
                            </div>
                            <div class="card-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Savings Goal</div>
                                <div class="card-value">78%</div>
                                <div class="card-change positive">
                                    <i class="fas fa-arrow-up"></i>
                                    +15% this quarter
                                </div>
                            </div>
                            <div class="card-icon">
                                <i class="fas fa-piggy-bank"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="phases-section">
                    <h2 class="section-title">
                        <i class="fas fa-rocket"></i>
                        MyTracksy Development Phases
                    </h2>
                    <div class="phases-grid" id="phasesGrid">
                        <!-- Phases will be dynamically loaded here -->
                    </div>
                </div>
            </main>
        </section>
    </main>

    <script>
        // Global variables
        let currentUser = null;
        let expenses = [
            { id: 1, amount: 2500, category: 'Food & Dining', description: 'Lunch at Galle Face Hotel', date: '2025-07-06' },
            { id: 2, amount: 1200, category: 'Transportation', description: 'Uber to Colombo Fort', date: '2025-07-05' },
            { id: 3, amount: 850, category: 'Groceries', description: 'Cargills Food City', date: '2025-07-04' },
            { id: 4, amount: 15000, category: 'Healthcare', description: 'Medical checkup at Nawaloka', date: '2025-07-03' },
            { id: 5, amount: 3200, category: 'Entertainment', description: 'Movie tickets and dinner', date: '2025-07-02' }
        ];

        const phases = [
            {
                number: "1-7",
                title: "Foundation & Core Features",
                description: "Essential expense tracking, voice commands, SMS integration, and basic analytics",
                features: ["Voice expense recording", "SMS banking integration", "Multi-language support", "Basic analytics", "Export functionality"]
            },
            {
                number: "8",
                title: "AI & Machine Learning",
                description: "Intelligent expense categorization, fraud detection, and predictive analytics",
                features: ["Smart categorization", "Fraud detection", "Spending predictions", "Anomaly detection", "ML-powered insights"]
            },
            {
                number: "9",
                title: "Family & Collaboration",
                description: "Real-time family budgeting, shared expense tracking, and collaborative features",
                features: ["Family accounts", "Shared budgets", "Real-time sync", "Permission management", "Collaborative planning"]
            },
            {
                number: "10",
                title: "Investment Tracking",
                description: "CSE stock tracking, cryptocurrency monitoring, and portfolio management",
                features: ["CSE integration", "Crypto tracking", "Portfolio analytics", "Investment alerts", "Market insights"]
            },
            {
                number: "11",
                title: "Business Intelligence",
                description: "Advanced analytics, predictive insights, and comprehensive reporting",
                features: ["Predictive analytics", "Custom reports", "Business insights", "Trend analysis", "Performance metrics"]
            },
            {
                number: "12",
                title: "Enterprise Integration",
                description: "Bank APIs, third-party integrations, and enterprise-grade security",
                features: ["Bank API integration", "Third-party services", "Enterprise security", "Compliance tools", "Admin dashboard"]
            },
            {
                number: "13-15",
                title: "Advanced AI & IoT",
                description: "Neural networks, IoT device integration, and smart automation",
                features: ["Neural networks", "IoT integration", "Smart automation", "Device connectivity", "Advanced AI models"]
            },
            {
                number: "16-18",
                title: "Blockchain & Security",
                description: "Blockchain integration, quantum encryption, and advanced security",
                features: ["Blockchain technology", "Quantum encryption", "Smart contracts", "Decentralized features", "Advanced security"]
            },
            {
                number: "19-22",
                title: "Future Technologies",
                description: "AR/VR interfaces, quantum computing, and autonomous financial management",
                features: ["AR/VR interfaces", "Quantum computing", "Autonomous finance", "Future-ready tech", "Next-gen features"]
            }
        ];

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthentication();
            setupEventListeners();
            loadPhases();
            
            // Navbar scroll effect
            window.addEventListener('scroll', function() {
                const navbar = document.getElementById('navbar');
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            });
        });

        function checkAuthentication() {
            const loginData = localStorage.getItem('myTracksyLogin');
            const socialLogin = localStorage.getItem('myTracksySocialLogin');
            const biometricLogin = localStorage.getItem('myTracksyBiometric');
            const userData = localStorage.getItem('myTracksyUser');
            
            if (loginData || socialLogin || biometricLogin || userData) {
                currentUser = JSON.parse(userData || loginData || socialLogin || biometricLogin);
                updateWelcomeMessage();
                
                // Apply any existing company theme
                const companyData = localStorage.getItem('myTracksyCompany');
                if (companyData) {
                    const company = JSON.parse(companyData);
                    applyCompanyTheme(company);
                    updateCompanyInfo(company);
                }
                
                // For authenticated users, this page shows the general dashboard
                // They can access their user profile via the sidebar menu
            } else {
                // Redirect to login if not authenticated
                setTimeout(() => {
                    if (confirm('Please log in to access your dashboard. Redirect to login page?')) {
                        window.location.href = 'login.html';
                    }
                }, 2000);
            }
        }

        function updateWelcomeMessage() {
            if (currentUser) {
                const welcomeElement = document.getElementById('welcomeMessage');
                const userAvatar = document.getElementById('userAvatar');
                
                welcomeElement.textContent = `Welcome back, ${currentUser.name || currentUser.email}! Here's your financial overview.`;
                
                if (currentUser.name) {
                    userAvatar.innerHTML = currentUser.name.charAt(0).toUpperCase();
                } else {
                    userAvatar.innerHTML = '<i class="fas fa-user"></i>';
                }
            }
        }

        function setupEventListeners() {
            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Sidebar link active state
            document.querySelectorAll('.sidebar-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    if (!this.onclick) {
                        e.preventDefault();
                        document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
                        this.classList.add('active');
                    }
                });
            });
        }

        function loadPhases() {
            const phasesGrid = document.getElementById('phasesGrid');
            phasesGrid.innerHTML = '';

            phases.forEach((phase, index) => {
                const phaseCard = document.createElement('div');
                phaseCard.className = 'phase-card';
                phaseCard.style.animationDelay = `${index * 0.1}s`;
                phaseCard.style.animation = 'fadeInUp 0.6s ease-out both';

                phaseCard.innerHTML = `
                    <div class="phase-header">
                        <div class="phase-number">Phase ${phase.number}</div>
                        <div class="phase-status active">
                            <i class="fas fa-rocket"></i>
                            ACTIVE
                        </div>
                    </div>
                    <div class="phase-title">${phase.title}</div>
                    <div class="phase-description">${phase.description}</div>
                    <ul class="phase-features">
                        ${phase.features.map(feature => `
                            <li class="phase-feature">
                                <i class="fas fa-check"></i>
                                ${feature}
                            </li>
                        `).join('')}
                    </ul>
                    <div class="phase-actions">
                        <button class="btn btn-primary phase-demo-btn" onclick="openPhaseDemo('${phase.number}')" style="width: 100%; margin-top: 1rem;">
                            <i class="fas fa-play"></i>
                            Try Live Demo
                        </button>
                    </div>
                `;

                phasesGrid.appendChild(phaseCard);
            });
        }

        function openPhaseDemo(phaseNumber) {
            // Open the fully functional phases page with all real demonstrations
            window.location.href = 'phases.html';
        }

        function showDashboard() {
            document.getElementById('hero').classList.add('hidden');
            document.getElementById('dashboardSection').classList.remove('hidden');
            
            // Animate cards
            setTimeout(() => {
                document.querySelectorAll('.card').forEach((card, index) => {
                    card.style.animationDelay = `${index * 0.1}s`;
                    card.style.animation = 'slideInLeft 0.6s ease-out both';
                });
            }, 100);
        }

        function showFeatures() {
            const features = [
                '🎤 Voice expense recording in English, Sinhala & Tamil',
                '🤖 AI-powered expense categorization and insights',
                '👨‍👩‍👧‍👦 Real-time family budget sharing and collaboration',
                '📱 Sri Lankan bank SMS parsing and integration',
                '📈 CSE stock portfolio tracking and analytics',
                '🎉 Cultural festival & Poya day financial alerts',
                '🔮 Predictive spending analytics and recommendations',
                '📊 Export to PDF/Excel with custom formatting',
                '🏢 Enterprise API integrations and security',
                '☁️ Multi-device synchronization and backup',
                '🧠 Advanced AI and machine learning algorithms',
                '🔗 Blockchain integration and smart contracts',
                '🥽 AR/VR financial visualization interfaces',
                '⚛️ Quantum computing for complex calculations',
                '🚗 Autonomous financial management system'
            ];
            
            alert('🚀 MyTracksy Complete Feature List:\n\n' + features.map((f, i) => `${i + 1}. ${f}`).join('\n'));
        }

        function showExpenseTracker() {
            document.getElementById('hero').classList.add('hidden');
            document.getElementById('dashboardSection').classList.remove('hidden');
            
            // Show expense tracker interface
            const mainDashboard = document.querySelector('.main-dashboard');
            mainDashboard.innerHTML = `
                <div class="dashboard-header">
                    <div>
                        <h1 class="dashboard-title">💰 Expense Tracker</h1>
                        <p style="color: var(--gray-600); margin-top: 0.5rem;">Track and manage your expenses efficiently</p>
                    </div>
                    <div class="cta-buttons">
                        <button class="btn btn-primary" onclick="addExpense()">
                            <i class="fas fa-plus"></i>
                            Add New Expense
                        </button>
                        <button class="btn btn-secondary" onclick="showDashboard()">
                            <i class="fas fa-arrow-left"></i>
                            Back to Dashboard
                        </button>
                    </div>
                </div>

                <div class="cards-grid">
                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Total Expenses</div>
                                <div class="card-value">LKR ${expenses.reduce((sum, exp) => sum + exp.amount, 0).toLocaleString()}</div>
                                <div class="card-change">This Month's Spending</div>
                            </div>
                            <div class="card-icon">
                                <i class="fas fa-receipt"></i>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Average Expense</div>
                                <div class="card-value">LKR ${Math.round(expenses.reduce((sum, exp) => sum + exp.amount, 0) / expenses.length).toLocaleString()}</div>
                                <div class="card-change">Per Transaction</div>
                            </div>
                            <div class="card-icon">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 2rem;">
                    <div class="card-header">
                        <h3 class="card-title">Recent Transactions</h3>
                    </div>
                    <div id="expensesList">
                        ${expenses.map(expense => `
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; border-bottom: 1px solid var(--gray-200); transition: var(--transition);" onmouseover="this.style.backgroundColor='var(--gray-100)'" onmouseout="this.style.backgroundColor='transparent'">
                                <div>
                                    <div style="font-weight: 600; color: var(--dark-color);">${expense.description}</div>
                                    <div style="font-size: 0.9rem; color: var(--gray-600); margin-top: 0.25rem;">
                                        ${expense.category} • ${expense.date}
                                    </div>
                                </div>
                                <div style="font-size: 1.2rem; font-weight: 700; color: var(--primary-color);">
                                    LKR ${expense.amount.toLocaleString()}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function addExpense() {
            showExpenseForm();
        }

        function showExpenseForm() {
            // Create modal overlay
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                z-index: 1000;
                display: flex;
                align-items: center;
                justify-content: center;
                backdrop-filter: blur(5px);
            `;

            modal.innerHTML = `
                <div class="expense-form-modal" style="
                    background: white;
                    border-radius: var(--border-radius-lg);
                    padding: 2rem;
                    max-width: 500px;
                    width: 90%;
                    max-height: 90vh;
                    overflow-y: auto;
                    box-shadow: var(--shadow-lg);
                    animation: slideInUp 0.3s ease-out;
                ">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="margin: 0; color: var(--dark-color);">
                            <i class="fas fa-plus-circle" style="color: var(--primary-color); margin-right: 0.5rem;"></i>
                            Add New Expense
                        </h2>
                        <button onclick="closeExpenseForm()" style="
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            color: var(--gray-500);
                            cursor: pointer;
                            padding: 0.5rem;
                            border-radius: 50%;
                            transition: var(--transition);
                        " onmouseover="this.style.background='var(--gray-200)'" onmouseout="this.style.background='none'">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <form id="expenseForm" style="display: flex; flex-direction: column; gap: 1rem;">
                        <!-- Voice Input Section -->
                        <div style="background: var(--gray-100); border-radius: var(--border-radius); padding: 1rem; margin-bottom: 1rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <i class="fas fa-microphone" style="color: var(--primary-color);"></i>
                                <span style="font-weight: 600; color: var(--dark-color);">Voice Input</span>
                            </div>
                            <p style="font-size: 0.9rem; color: var(--gray-600); margin-bottom: 1rem;">
                                Click the microphone and say something like: "Lunch at KFC for 850 rupees"
                            </p>
                            <div style="display: flex; gap: 1rem; align-items: center;">
                                <button type="button" id="voiceExpenseBtn" onclick="startVoiceExpenseInput()" style="
                                    background: var(--primary-color);
                                    color: white;
                                    border: none;
                                    padding: 0.75rem 1.5rem;
                                    border-radius: var(--border-radius);
                                    cursor: pointer;
                                    font-weight: 600;
                                    transition: var(--transition);
                                    display: flex;
                                    align-items: center;
                                    gap: 0.5rem;
                                ">
                                    <i class="fas fa-microphone"></i>
                                    Start Voice Input
                                </button>
                                <div id="voiceStatus" style="font-size: 0.9rem; color: var(--gray-600);"></div>
                            </div>
                        </div>

                        <!-- Amount Input -->
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--dark-color);">
                                Amount (LKR) *
                            </label>
                            <div style="position: relative;">
                                <input type="number" id="expenseAmount" placeholder="Enter amount" required style="
                                    width: 100%;
                                    padding: 0.75rem 3rem 0.75rem 1rem;
                                    border: 2px solid var(--gray-300);
                                    border-radius: var(--border-radius);
                                    font-size: 1rem;
                                    transition: var(--transition);
                                " onfocus="this.style.borderColor='var(--primary-color)'" onblur="this.style.borderColor='var(--gray-300)'">
                                <button type="button" onclick="startVoiceAmountInput()" style="
                                    position: absolute;
                                    right: 0.5rem;
                                    top: 50%;
                                    transform: translateY(-50%);
                                    background: var(--primary-color);
                                    color: white;
                                    border: none;
                                    width: 2rem;
                                    height: 2rem;
                                    border-radius: 50%;
                                    cursor: pointer;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    transition: var(--transition);
                                " title="Voice input for amount">
                                    <i class="fas fa-microphone" style="font-size: 0.8rem;"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Description Input -->
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--dark-color);">
                                Description *
                            </label>
                            <div style="position: relative;">
                                <input type="text" id="expenseDescription" placeholder="What did you spend on?" required style="
                                    width: 100%;
                                    padding: 0.75rem 3rem 0.75rem 1rem;
                                    border: 2px solid var(--gray-300);
                                    border-radius: var(--border-radius);
                                    font-size: 1rem;
                                    transition: var(--transition);
                                " onfocus="this.style.borderColor='var(--primary-color)'" onblur="this.style.borderColor='var(--gray-300)'">
                                <button type="button" onclick="startVoiceDescriptionInput()" style="
                                    position: absolute;
                                    right: 0.5rem;
                                    top: 50%;
                                    transform: translateY(-50%);
                                    background: var(--primary-color);
                                    color: white;
                                    border: none;
                                    width: 2rem;
                                    height: 2rem;
                                    border-radius: 50%;
                                    cursor: pointer;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    transition: var(--transition);
                                " title="Voice input for description">
                                    <i class="fas fa-microphone" style="font-size: 0.8rem;"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Category Selection -->
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--dark-color);">
                                Category *
                            </label>
                            <select id="expenseCategory" required style="
                                width: 100%;
                                padding: 0.75rem 1rem;
                                border: 2px solid var(--gray-300);
                                border-radius: var(--border-radius);
                                font-size: 1rem;
                                background: white;
                                transition: var(--transition);
                            " onfocus="this.style.borderColor='var(--primary-color)'" onblur="this.style.borderColor='var(--gray-300)'">
                                <option value="">Select category</option>
                                <option value="Food & Dining">Food & Dining</option>
                                <option value="Transportation">Transportation</option>
                                <option value="Healthcare">Healthcare</option>
                                <option value="Entertainment">Entertainment</option>
                                <option value="Shopping">Shopping</option>
                                <option value="Bills & Utilities">Bills & Utilities</option>
                                <option value="Education">Education</option>
                                <option value="Travel">Travel</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>

                        <!-- Date Input -->
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--dark-color);">
                                Date *
                            </label>
                            <input type="date" id="expenseDate" required style="
                                width: 100%;
                                padding: 0.75rem 1rem;
                                border: 2px solid var(--gray-300);
                                border-radius: var(--border-radius);
                                font-size: 1rem;
                                transition: var(--transition);
                            " onfocus="this.style.borderColor='var(--primary-color)'" onblur="this.style.borderColor='var(--gray-300)'">
                        </div>

                        <!-- Comment Section -->
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--dark-color);">
                                Voice Comment (Optional)
                            </label>
                            <div style="position: relative;">
                                <textarea id="expenseComment" placeholder="Add a voice comment about this expense..." style="
                                    width: 100%;
                                    min-height: 80px;
                                    padding: 0.75rem 3rem 0.75rem 1rem;
                                    border: 2px solid var(--gray-300);
                                    border-radius: var(--border-radius);
                                    font-size: 1rem;
                                    resize: vertical;
                                    transition: var(--transition);
                                    font-family: inherit;
                                " onfocus="this.style.borderColor='var(--primary-color)'" onblur="this.style.borderColor='var(--gray-300)'"></textarea>
                                <button type="button" onclick="startVoiceCommentInput()" style="
                                    position: absolute;
                                    right: 0.5rem;
                                    top: 0.75rem;
                                    background: var(--primary-color);
                                    color: white;
                                    border: none;
                                    width: 2rem;
                                    height: 2rem;
                                    border-radius: 50%;
                                    cursor: pointer;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    transition: var(--transition);
                                " title="Voice input for comment">
                                    <i class="fas fa-microphone" style="font-size: 0.8rem;"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                            <button type="submit" style="
                                flex: 1;
                                background: var(--primary-color);
                                color: white;
                                border: none;
                                padding: 0.75rem 1.5rem;
                                border-radius: var(--border-radius);
                                font-size: 1rem;
                                font-weight: 600;
                                cursor: pointer;
                                transition: var(--transition);
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                gap: 0.5rem;
                            " onmouseover="this.style.background='var(--secondary-color)'" onmouseout="this.style.background='var(--primary-color)'">
                                <i class="fas fa-save"></i>
                                Save Expense
                            </button>
                            <button type="button" onclick="closeExpenseForm()" style="
                                background: var(--gray-500);
                                color: white;
                                border: none;
                                padding: 0.75rem 1.5rem;
                                border-radius: var(--border-radius);
                                font-size: 1rem;
                                font-weight: 600;
                                cursor: pointer;
                                transition: var(--transition);
                            " onmouseover="this.style.background='var(--gray-600)'" onmouseout="this.style.background='var(--gray-500)'">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            `;

            document.body.appendChild(modal);

            // Set default date to today
            document.getElementById('expenseDate').value = new Date().toISOString().split('T')[0];

            // Handle form submission
            document.getElementById('expenseForm').addEventListener('submit', function(e) {
                e.preventDefault();
                submitExpenseForm();
            });

            // Close modal when clicking outside
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeExpenseForm();
                }
            });
        }

        function closeExpenseForm() {
            const modal = document.querySelector('[style*="backdrop-filter: blur(5px)"]');
            if (modal) {
                modal.remove();
            }
        }

        function submitExpenseForm() {
            const amount = parseFloat(document.getElementById('expenseAmount').value);
            const description = document.getElementById('expenseDescription').value.trim();
            const category = document.getElementById('expenseCategory').value;
            const date = document.getElementById('expenseDate').value;
            const comment = document.getElementById('expenseComment').value.trim();

            if (!amount || !description || !category || !date) {
                alert('Please fill in all required fields!');
                return;
            }

            const newExpense = {
                id: expenses.length + 1,
                amount: amount,
                category: category,
                description: description,
                date: date,
                comment: comment
            };

            expenses.unshift(newExpense);
            
            // Close the form
            closeExpenseForm();
            
            // Show success notification
            showNotification('Expense added successfully!', 'success');
            
            // Refresh expense tracker if currently shown
            if (document.querySelector('.main-dashboard').innerHTML.includes('Recent Transactions')) {
                showExpenseTracker();
            }
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            const bgColor = type === 'success' ? 'var(--success-color)' : 'var(--error-color)';
            
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${bgColor};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: var(--border-radius);
                box-shadow: var(--shadow);
                z-index: 1001;
                animation: slideInRight 0.3s ease-out;
                max-width: 300px;
            `;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                ${message}
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Voice Input Functions
        let isRecording = false;
        let currentVoiceTarget = null;

        function startVoiceExpenseInput() {
            const btn = document.getElementById('voiceExpenseBtn');
            const status = document.getElementById('voiceStatus');
            
            if (!isRecording) {
                isRecording = true;
                currentVoiceTarget = 'expense';
                btn.innerHTML = '<i class="fas fa-stop"></i> Stop Recording';
                btn.style.background = 'var(--error-color)';
                status.innerHTML = '🎤 Listening... Say something like "Lunch at KFC for 850 rupees"';
                status.style.color = 'var(--primary-color)';
                
                // Simulate voice recognition after 3 seconds
                setTimeout(() => {
                    if (isRecording && currentVoiceTarget === 'expense') {
                        const sampleExpenses = [
                            { amount: 850, description: 'Lunch at KFC', category: 'Food & Dining' },
                            { amount: 1200, description: 'Uber ride to airport', category: 'Transportation' },
                            { amount: 2500, description: 'Dinner at hotel restaurant', category: 'Food & Dining' },
                            { amount: 500, description: 'Coffee at Starbucks', category: 'Food & Dining' },
                            { amount: 3200, description: 'Movie tickets and snacks', category: 'Entertainment' }
                        ];
                        
                        const randomExpense = sampleExpenses[Math.floor(Math.random() * sampleExpenses.length)];
                        
                        // Fill form fields
                        document.getElementById('expenseAmount').value = randomExpense.amount;
                        document.getElementById('expenseDescription').value = randomExpense.description;
                        document.getElementById('expenseCategory').value = randomExpense.category;
                        
                        status.innerHTML = `✅ Recognized: "${randomExpense.description} for ${randomExpense.amount} rupees"`;
                        status.style.color = 'var(--success-color)';
                        
                        stopVoiceRecording();
                    }
                }, 3000);
            } else {
                stopVoiceRecording();
            }
        }

        function startVoiceAmountInput() {
            if (!isRecording) {
                isRecording = true;
                currentVoiceTarget = 'amount';
                
                showNotification('🎤 Listening for amount...', 'success');
                
                setTimeout(() => {
                    if (isRecording && currentVoiceTarget === 'amount') {
                        const amounts = [500, 850, 1200, 1500, 2500, 3200, 4500];
                        const randomAmount = amounts[Math.floor(Math.random() * amounts.length)];
                        
                        document.getElementById('expenseAmount').value = randomAmount;
                        showNotification(`✅ Amount set to LKR ${randomAmount}`, 'success');
                        
                        stopVoiceRecording();
                    }
                }, 2000);
            }
        }

        function startVoiceDescriptionInput() {
            if (!isRecording) {
                isRecording = true;
                currentVoiceTarget = 'description';
                
                showNotification('🎤 Listening for description...', 'success');
                
                setTimeout(() => {
                    if (isRecording && currentVoiceTarget === 'description') {
                        const descriptions = [
                            'Lunch at restaurant',
                            'Grocery shopping',
                            'Bus fare to office',
                            'Medical prescription',
                            'Movie ticket',
                            'Coffee with friends',
                            'Taxi ride home',
                            'Books and stationery',
                            'Dinner with family'
                        ];
                        const randomDesc = descriptions[Math.floor(Math.random() * descriptions.length)];
                        
                        document.getElementById('expenseDescription').value = randomDesc;
                        showNotification(`✅ Description: "${randomDesc}"`, 'success');
                        
                        stopVoiceRecording();
                    }
                }, 2000);
            }
        }

        function startVoiceCommentInput() {
            if (!isRecording) {
                isRecording = true;
                currentVoiceTarget = 'comment';
                
                showNotification('🎤 Listening for comment...', 'success');
                
                setTimeout(() => {
                    if (isRecording && currentVoiceTarget === 'comment') {
                        const comments = [
                            'This was a necessary expense for work',
                            'Good value for money, will visit again',
                            'Emergency expense, unexpected but required',
                            'Monthly regular expense, budgeted for this',
                            'Special occasion expense, worth it',
                            'Could have been avoided, need to be more careful',
                            'Business expense, will be reimbursed',
                            'Family expense, shared cost'
                        ];
                        const randomComment = comments[Math.floor(Math.random() * comments.length)];
                        
                        document.getElementById('expenseComment').value = randomComment;
                        showNotification(`✅ Comment added`, 'success');
                        
                        stopVoiceRecording();
                    }
                }, 2000);
            }
        }

        function stopVoiceRecording() {
            isRecording = false;
            currentVoiceTarget = null;
            
            // Reset main voice button if it exists
            const mainBtn = document.getElementById('voiceExpenseBtn');
            if (mainBtn) {
                mainBtn.innerHTML = '<i class="fas fa-microphone"></i> Start Voice Input';
                mainBtn.style.background = 'var(--primary-color)';
            }
        }

        // Add voice input buttons to other parts of the app
        function addVoiceInputToElement(elementId, placeholder = 'Click microphone to add voice input') {
            const element = document.getElementById(elementId);
            if (element && element.tagName.toLowerCase() !== 'select') {
                const container = element.parentElement;
                container.style.position = 'relative';
                
                // Check if microphone button already exists
                if (!container.querySelector('.voice-input-btn')) {
                    const voiceBtn = document.createElement('button');
                    voiceBtn.type = 'button';
                    voiceBtn.className = 'voice-input-btn';
                    voiceBtn.style.cssText = `
                        position: absolute;
                        right: 0.5rem;
                        top: 50%;
                        transform: translateY(-50%);
                        background: var(--primary-color);
                        color: white;
                        border: none;
                        width: 2rem;
                        height: 2rem;
                        border-radius: 50%;
                        cursor: pointer;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        transition: var(--transition);
                        z-index: 10;
                    `;
                    voiceBtn.innerHTML = '<i class="fas fa-microphone" style="font-size: 0.8rem;"></i>';
                    voiceBtn.title = 'Voice input';
                    
                    voiceBtn.addEventListener('click', () => {
                        startGenericVoiceInput(elementId);
                    });
                    
                    container.appendChild(voiceBtn);
                    
                    // Adjust input padding to make room for button
                    element.style.paddingRight = '3rem';
                }
            }
        }

        function startGenericVoiceInput(targetElementId) {
            if (!isRecording) {
                isRecording = true;
                currentVoiceTarget = targetElementId;
                
                showNotification('🎤 Listening...', 'success');
                
                setTimeout(() => {
                    if (isRecording && currentVoiceTarget === targetElementId) {
                        const element = document.getElementById(targetElementId);
                        const sampleInputs = [
                            'This is a voice input comment',
                            'Added via voice recognition',
                            'Voice input is working perfectly',
                            'Great feature for accessibility',
                            'Voice comments make it easier'
                        ];
                        const randomInput = sampleInputs[Math.floor(Math.random() * sampleInputs.length)];
                        
                        if (element) {
                            element.value = randomInput;
                            showNotification('✅ Voice input captured', 'success');
                        }
                        
                        stopVoiceRecording();
                    }
                }, 2000);
            }
        }

        function applyCompanyTheme(company) {
            const body = document.body;
            
            // Remove existing theme classes
            body.classList.remove('theme-technology', 'theme-healthcare', 'theme-legal', 'theme-manufacturing', 'theme-food', 'theme-retail', 'theme-service', 'theme-finance', 'theme-education');
            
            // Add new theme class based on company category
            if (company.category) {
                body.classList.add(`theme-${company.category}`);
            }

            // Apply custom brand colors if available
            if (company.primaryColor) {
                document.documentElement.style.setProperty('--primary-color', company.primaryColor);
            }
            if (company.secondaryColor) {
                document.documentElement.style.setProperty('--secondary-color', company.secondaryColor);
            }
        }

        function updateCompanyInfo(company) {
            // Update navbar with company logo
            const logo = document.querySelector('.logo');
            if (company.logo && company.logo !== 'undefined') {
                logo.innerHTML = `
                    <img src="${company.logo}" style="width: 40px; height: 40px; border-radius: 50%; object-fit: contain; margin-right: 0.5rem;">
                    ${company.name || 'MyTracksy'}
                `;
            } else {
                logo.innerHTML = `
                    <i class="fas fa-chart-line"></i>
                    ${company.name || 'MyTracksy'}
                `;
            }

            // Update hero title with company info
            const heroTitle = document.querySelector('.hero-title');
            if (heroTitle) {
                heroTitle.textContent = `🏢 ${company.name || 'MyTracksy'} Financial Intelligence`;
            }

            // Update dashboard title
            const dashboardTitle = document.querySelector('.dashboard-title');
            if (dashboardTitle && !dashboardTitle.textContent.includes('Expense Tracker')) {
                dashboardTitle.textContent = `${company.name || 'Company'} Dashboard`;
            }

            // Add company info to sidebar
            addCompanyInfoToSidebar(company);
        }

        function addCompanyInfoToSidebar(company) {
            const sidebar = document.querySelector('.sidebar-menu');
            if (sidebar) {
                // Check if company info already exists
                const existingCompanyInfo = sidebar.querySelector('.company-info-section');
                if (existingCompanyInfo) {
                    existingCompanyInfo.remove();
                }

                // Create company info section
                const companySection = document.createElement('div');
                companySection.className = 'company-info-section';
                companySection.style.cssText = `
                    padding: 1rem;
                    margin-bottom: 1rem;
                    background: rgba(255, 255, 255, 0.1);
                    border-radius: var(--border-radius);
                    text-align: center;
                `;

                companySection.innerHTML = `
                    <div style="margin-bottom: 1rem;">
                        ${company.logo && company.logo !== 'undefined' 
                            ? `<img src="${company.logo}" style="width: 60px; height: 60px; border-radius: 50%; object-fit: contain; margin-bottom: 0.5rem;">`
                            : `<div style="width: 60px; height: 60px; border-radius: 50%; background: var(--primary-color); margin: 0 auto 0.5rem; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;"><i class="fas fa-building"></i></div>`
                        }
                        <h4 style="color: var(--dark-color); margin-bottom: 0.25rem; font-size: 0.9rem;">${company.name || 'Company'}</h4>
                        <p style="color: var(--gray-600); font-size: 0.8rem;">${company.category ? company.category.charAt(0).toUpperCase() + company.category.slice(1) : 'Business'}</p>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--gray-600);">
                        <span>Founded: ${company.founded || 'N/A'}</span>
                        <span>${company.employees || 'N/A'} employees</span>
                    </div>
                `;

                // Insert at the beginning of sidebar
                sidebar.insertBefore(companySection, sidebar.firstChild);

                // Add company profile menu item
                const companyMenuItem = document.createElement('li');
                companyMenuItem.className = 'sidebar-item';
                companyMenuItem.innerHTML = `
                    <a href="company-setup.html" class="sidebar-link">
                        <i class="fas fa-building"></i>
                        Company Profile
                    </a>
                `;
                sidebar.insertBefore(companyMenuItem, sidebar.children[1]);
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('myTracksyLogin');
                localStorage.removeItem('myTracksySocialLogin');
                localStorage.removeItem('myTracksyBiometric');
                localStorage.removeItem('myTracksyUser');
                localStorage.removeItem('myTracksyCompany');
                window.location.href = 'login.html';
            }
        }

        // Add slide in right animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from {
                    opacity: 0;
                    transform: translateX(100px);
                }
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }
            @keyframes slideInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>